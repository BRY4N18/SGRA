<section class="page-header">
  <div>
    <h2>Gestión de Solicitudes</h2>
    <p>Revisa, acepta o rechaza solicitudes de refuerzo académico.</p>
  </div>
</section>

<div class="tabs">
  <button
    *ngFor="let tab of tabs"
    class="tab"
    [class.active]="activeStatus === tab.status"
    type="button"
    (click)="setTab(tab.status)"
  >
    {{ tab.label }}
  </button>
</div>

<section class="request-grid">
  <article class="request-card" *ngFor="let request of filteredRequests">
    <div class="card-header">
      <div>
        <h4>{{ request.studentName }}</h4>
        <small>{{ request.studentEmail }}</small>
      </div>
      <span class="chip">{{ request.type }}</span>
    </div>
    <div class="card-body">
      <p><strong>Asignatura:</strong> {{ request.subject }}</p>
      <p><strong>Tema:</strong> {{ request.topic }}</p>
      <p><strong>Motivo:</strong> {{ request.reason }}</p>
      <p><strong>Modalidad:</strong> {{ request.mode }}</p>
      <p class="date">{{ request.dateLabel }}</p>
    </div>
    <div class="card-actions">
      <button class="btn btn-outline-success btn-sm" type="button" (click)="openDetail(request)">
        Ver más
      </button>
      <button class="btn btn-outline-danger btn-sm" type="button" (click)="reject(request)">
        Rechazar
      </button>
      <button class="btn btn-success btn-sm" type="button" (click)="accept(request)">
        Aceptar
      </button>
    </div>
  </article>

  <div class="empty-state" *ngIf="!filteredRequests.length">
    No existen solicitudes en esta categoría.
  </div>
</section>

<div class="modal-backdrop" *ngIf="selectedRequest">
  <div class="modal-card">
    <div class="modal-header">
      <h4>Detalle de Solicitud</h4>
      <button class="btn-close" type="button" (click)="closeDetail()"></button>
    </div>
    <div class="modal-body">
      <p><strong>Estudiante:</strong> {{ selectedRequest!.studentName }}</p>
      <p><strong>Correo:</strong> {{ selectedRequest!.studentEmail }}</p>
      <p><strong>Asignatura:</strong> {{ selectedRequest!.subject }}</p>
      <p><strong>Tema:</strong> {{ selectedRequest!.topic }}</p>
      <p><strong>Motivo:</strong> {{ selectedRequest!.reason }}</p>
      <p><strong>Modalidad:</strong> {{ selectedRequest!.mode }}</p>
      <p><strong>Tipo:</strong> {{ selectedRequest!.type }}</p>
      <p><strong>Fecha:</strong> {{ selectedRequest!.dateLabel }}</p>
    </div>
    <div class="modal-actions">
      <button class="btn btn-outline-secondary btn-sm" type="button" (click)="closeDetail()">
        Cerrar
      </button>
    </div>
  </div>
</div>
